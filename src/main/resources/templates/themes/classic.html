<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8" />
    <title th:text="${resume.cv.name} + ' - Resume'"></title>
    <meta name="author" th:content="${resume.cv.name}" />
    <meta name="subject" content="Professional Resume" />
    <meta name="keywords" th:content="${#strings.listJoin(resume.cv.sections['skills'], ', ')}" />
    <style th:inline="css">
        /* ... (Styles remain identical to your provided classic.html) ... */
        @page {
            size: letter;
            margin: 0.75in;
            @bottom-right {
                content: "[(${resume.cv.name})] - " counter(page) "/" counter(pages);
                font-family: "[(${selectedFont})]", sans-serif;
                font-size: 8pt;
                color: #666;
            }
        }
        body {
            font-family: "[(${selectedFont})]", sans-serif;
            margin: 0; padding: 0;
            color: [(${resume.design?.colors?.body ?: '#333'})];
            line-height: 1.4;
            font-size: 10pt;
        }
        .header { text-align: center; margin-bottom: 10pt; }
        .name {
            font-size: 24pt; font-weight: 700; margin: 0;
            color: [(${resume.design?.colors?.name ?: '#000'})];
        }
        .contact-info { font-size: 9pt; margin-top: 5pt; color: #444; }
        .section { margin-top: 12pt; page-break-inside: auto; }
        .section-title {
            font-size: 12pt; font-weight: 700;
            color: [(${resume.design?.colors?.sectionTitles ?: '#000'})];
            border-bottom: 1pt solid [(${resume.design?.colors?.sectionTitles ?: '#000'})];
            text-transform: uppercase; letter-spacing: 1pt;
            margin-bottom: 8pt;
        }
        .entry { margin-bottom: 12pt; page-break-inside: avoid; }
        .entry-header { font-weight: 700; display: block; clear: both; }
        .entry-subheader { font-style: italic; color: #555; }
        .right-float { float: right; font-weight: normal; font-style: normal; color: #666; }
        ul { margin: 3pt 0 0 15pt; padding: 0; list-style-type: disc; }
        li { margin-bottom: 2pt; }
        .text-entry {
            margin-top: 4pt;
            white-space: normal;
            text-align: justify;
        }
        .text-entry p { margin: 0; }
    </style>
</head>
<body>
<div class="header">
    <h1 class="name" th:utext="${resume.cv.name}">NAME</h1>
    <div class="contact-info">
        <span th:if="${resume.cv.location != null}" th:utext="${resume.cv.location}">Location</span>
        <span th:if="${resume.cv.location != null and resume.cv.email != null}"> | </span>
        <span th:if="${resume.cv.email != null}" th:utext="${resume.cv.email}">Email</span>
        <span th:if="${resume.cv.website != null}"> | <span th:utext="${resume.cv.website}">Website</span></span>
    </div>
</div>

<div th:each="key : ${resume.design.layout.main}"
     th:if="${resume.cv.sections != null and resume.cv.sections.containsKey(key)}"
     class="section">

    <div class="section-title" th:utext="${#strings.toUpperCase(key)}">SECTION TITLE</div>

    <div th:with="data=${resume.cv.sections.get(key)}">
        <div th:if="${data instanceof T(java.util.List)}">
            <div th:each="item : ${data}" class="entry">
                <div th:if="${item instanceof T(java.util.Map)}">
                    <div class="entry-header">
                        <span th:with="entryTitle=${item['company'] ?: item['institution'] ?: item['title'] ?: item['name'] ?: item.values().iterator().next()}"
                              th:utext="${entryTitle}">Title</span>
                        <span class="right-float" th:utext="${item['location'] ?: item['date'] ?: ''}">Info</span>
                    </div>
                    <div class="entry-subheader" th:if="${item['position'] != null or item['area'] != null or item['subtitle'] != null}">
                        <span th:utext="${item['position'] ?: item['area'] ?: item['subtitle'] ?: ''}">Subtitle</span>
                        <span class="right-float" th:if="${item['date'] != null}" th:utext="${item['date']}">Date</span>
                    </div>
                    <ul th:if="${item['highlights']}">
                        <li th:each="h : ${item['highlights']}" th:utext="${h}">Highlight</li>
                    </ul>
                </div>
                <div th:if="${item instanceof T(java.lang.String)}">
                    <span th:utext="${item}">Bullet Point</span>
                </div>
            </div>
        </div>

        <div th:if="${data instanceof T(java.lang.String)}" class="text-entry">
            <p th:utext="${data}">Text content...</p>
        </div>
    </div>
</div>
</body>
</html>
